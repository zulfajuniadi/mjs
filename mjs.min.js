!function(a){"use strict";var b=[],c={},d=function(a,b){this.name=b,this.path=a,this.keys=[],this.fns=[],this.params={},this.regex=e(this.path,this.keys,!1,!1)};d.prototype.addHandler=function(a){this.fns.push(a)},d.prototype.removeHandler=function(a){for(var b=0,c=this.fns.length;c>b;b++){var d=this.fns[b];if(a==d)return this.fns.splice(b,1),void 0}},d.prototype.run=function(a){for(var b=0,c=this.fns.length;c>b;b++)this.fns[b].apply(this,a)},d.prototype.match=function(a,b){var c=this.regex.exec(a);if(!c)return!1;for(var d=1,e=c.length;e>d;++d){var f=this.keys[d-1],g="string"==typeof c[d]?decodeURIComponent(c[d]):c[d];f&&(this.params[f.name]=g),b.push(g)}return!0},d.prototype.toURL=function(a){var b=this.path;for(var c in a)b=b.replace("/:"+c,"/"+a[c]);if(b=b.replace(/\/:.*\?/g,"/").replace(/\?/g,""),-1!=b.indexOf(":"))throw new Error("missing parameters for url: "+b);return b};var e=function(a,b,c,d){return a instanceof RegExp?a:(a instanceof Array&&(a="("+a.join("|")+")"),a=a.concat(d?"":"/?").replace(/\/\(/g,"(?:/").replace(/\+/g,"__plus__").replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?/g,function(a,c,d,e,f,g){return b.push({name:e,optional:!!g}),c=c||"",""+(g?"":c)+"(?:"+(g?c:"")+(d||"")+(f||d&&"([^/.]+?)"||"([^/]+?)")+")"+(g||"")}).replace(/([\/.])/g,"\\$1").replace(/__plus__/g,"(.+)").replace(/\*/g,"(.*)"),new RegExp("^"+a+"$",c?"":"i"))},f=function(a,e){var f=a.split(" "),g=2==f.length?f[0]:null;a=2==f.length?f[1]:f[0],c[a]||(c[a]=new d(a,g),b.push(c[a])),c[a].addHandler(e)},g=function(a,b,c){if(void 0===c&&(c=!1),"function"==typeof b)f(a,b),c!==!0&&g.reload();else if("object"==typeof a){for(var d in a)f(d,a[d]);c!==!0&&g.reload()}else"undefined"==typeof b&&g.navigate(a)};g.lookup=function(a,c){for(var d=0,e=b.length;e>d;d++){var f=b[d];if(f.name==a)return f.toURL(c)}},g.remove=function(a,b){var d=c[a];d&&d.removeHandler(b)},g.removeAll=function(){c={},b=[]},g.navigate=function(a,b){b=b||{};var c=b.silent||!1;c&&l(),setTimeout(function(){window.location.hash=a,c&&setTimeout(function(){k()},1)},1)};var h=function(){return window.location.hash.substring(1)},i=function(a,b){var c=[];return b.match(a,c)?(b.run(c),!0):!1},j=g.reload=function(){for(var a=h(),c=0,d=b.length;d>c;c++){var e=b[c];if(i(a,e))return}},k=function(){a.addEventListener?a.addEventListener("hashchange",j,!1):a.attachEvent("onhashchange",j)},l=function(){a.removeEventListener?a.removeEventListener("hashchange",j):a.detachEvent("onhashchange",j)};k();var m=function(a,b,c){return void 0===b&&(b={}),this.outlet=a,this.config=b,this.Init(b,c),this},n=function(a,b){return function(){return b}};m.prototype.Init=function(b,c){function e(){delete m.Define,m.Router("*",function(){m.Router(o)}),"function"==typeof c&&c.call(a)}function f(){d.rootUrl=b.appUrl||d.rootUrl;var a=b.resources||[];m.AsyncEach(a,function(a,b){m.Define=function(b){var b=b||{};b.events&&d.Events(a,b.events),void 0===b.rendered&&(b.rendered=[]),b.data?d.Data(a,b.data):d.Data(a,function(a){a()}),d.Rendered(a,b.rendered),b.handle?m.Router(b.handle,function(){var b=m.O2A(arguments);d.SetDirty.call(d,a,b)},!0):m.Router.reload()},d.Load(a,b)},function(){b.postInit?b.postInit(e,b):e()})}var d=this;b.preInit?b.preInit(f,b):f(),m.Bind(document,"templateRendered",function(a){var b=a.data.template;d.SetRendered(b)})},m.prototype.Load=function(a,b){var c=this,d=a,e=c.rootUrl+d+"/"+d;a.indexOf("/")>-1&&(e=c.rootUrl+a),-1===c.loaded.indexOf(a)?c.GetTemplate(e+".html",a,function(){m.GetScript(e+".js",function(){b&&(c.loaded.push(a),b.call(c.templates[a]))})}):b.call(c.templates[a])},m.prototype.GetTemplate=function(b,c,d){var e=this;m.Get(b,function(b){var f=n(c,b);e.templates[c]={name:c,template:f,render:function(){function c(a){e.outlet.innerHTML=b.template(a),m.Fire(document,"templateRendered",{template:b.name})}var b=this,d=m.O2A(arguments);d.unshift(c),e.data[b.name].apply(a,d)}},d()})},m.prototype.Events=function(a,b){void 0===this.eventMaps[a]&&(this.eventMaps[a]={}),this.eventMaps[a]=b},m.prototype.Data=function(a,b){this.data[a]=b},m.prototype.Rendered=function(a,b){var c=this;Array.isArray(b)||(b=[b]),void 0===c.renderMaps[a]&&(c.renderMaps[a]=[]),b.forEach(function(b){-1===c.renderMaps[a].indexOf(b)&&c.renderMaps[a].push(b)}),c.eventMaps[a]&&c.renderMaps[a].push(function(){for(var b in c.eventMaps[a])if(c.eventMaps[a].hasOwnProperty(b)){var d=b.split(" "),e=d.shift(),f=d.join(" ");m.O2A(c.outlet.childNodes).forEach(function(d){return d.tagName?m.Delegate(d,e,f,c.eventMaps[a][b]):void 0})}})},m.prototype.SetRendered=function(a){var b=this;this.renderMaps[a]&&this.renderMaps[a].forEach(function(a){a.call(b)})},m.prototype.SetDirty=function(a,b){this.templates[a].render.apply(this.templates[a],b)};var o,p={loaded:[],config:{},outlet:document.body,templates:{},rootUrl:"/",eventMaps:{},data:{},renderMaps:{}};for(var q in p)p.hasOwnProperty(q)&&(m.prototype[q]=p[q]);m.Router=g,m.Extend=function(a,b){for(var c in b)a[c]&&"object"==typeof a[c]&&"[object Object]"==a[c].toString()&&b[c]?Extend(a[c],b[c]):a[c]=b[c];return a},m.Bind=function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)},m.Delegate=function(a,b,c,d){function e(a){var b=m.O2A(document.querySelectorAll(c)),e=b.indexOf(a.target);e>-1&&d.call(b[e],a)}a.addEventListener?a.addEventListener(b,e,!1):a.attachEvent("on"+b,e)},m.O2A=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&"length"!==c&&b.push(a[c]);return b},m.Fire=function(a,b,c){var d,c=c||{};document.createEvent?(d=document.createEvent("HTMLEvents"),d.initEvent(b,!0,!0)):(d=document.createEventObject(),d.eventType=b),d.data=c,document.createEvent?a.dispatchEvent(d):a.fireEvent("on"+d.eventType,d)},m.Get=function(a,b){function d(){if(4===c.readyState){if(200===c.status)return b.call(window,c.response);console.error("there was a problem in processing the request",c)}}var c;try{if(window.XMLHttpRequest?c=new XMLHttpRequest:window.ActiveXObject&&(c=new ActiveXObject("Microsoft.XMLHTTP")),!c)return alert("Giving up :( Cannot create an XMLHTTP instance"),!1;c.onreadystatechange=d,c.open("GET",a),c.send()}catch(e){console.error(e)}},m.GetScript=function(a,b){var b=b||function(){},c=document.createElement("script");c.onload=b,c.src=a,window.document.getElementsByTagName("head")[0].appendChild(c)},m.AsyncEach=function(b,c,d){function f(){e++,e<b.length?c(b[e],f):d.call(a)}var e=-1;f()},m.Configure=function(a){var a=a||{};n=a.compiler||n,o=a.defaultRoute||o},"undefined"!=typeof define&&define.amd?define([],function(){return m}):"undefined"!=typeof module&&module.exports?module.exports=m:a.mjs=m,m.O2A(document.getElementsByTagName("script")).forEach(function(a){"undefined"!=typeof a.dataset.mjsapp&&m.GetScript(a.dataset.mjsapp)})}(this);