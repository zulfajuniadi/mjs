!function(a){"use strict";var b={Runtime:{}},c=[],d={},e=function(a,b){this.name=b,this.path=a,this.keys=[],this.fns=[],this.params={},this.regex=f(this.path,this.keys,!1,!1)};e.prototype.addHandler=function(a){this.fns.push(a)},e.prototype.removeHandler=function(a){for(var b=0,c=this.fns.length;c>b;b++){var d=this.fns[b];if(a==d)return this.fns.splice(b,1),void 0}},e.prototype.run=function(a){for(var b=0,c=this.fns.length;c>b;b++)this.fns[b].apply(this,a)},e.prototype.match=function(a,b){var c=this.regex.exec(a);if(!c)return!1;for(var d=1,e=c.length;e>d;++d){var f=this.keys[d-1],g="string"==typeof c[d]?decodeURIComponent(c[d]):c[d];f&&(this.params[f.name]=g),b.push(g)}return!0},e.prototype.toURL=function(a){var b=this.path;for(var c in a)b=b.replace("/:"+c,"/"+a[c]);if(b=b.replace(/\/:.*\?/g,"/").replace(/\?/g,""),-1!=b.indexOf(":"))throw new Error("missing parameters for url: "+b);return b};var f=function(a,b,c,d){return a instanceof RegExp?a:(a instanceof Array&&(a="("+a.join("|")+")"),a=a.concat(d?"":"/?").replace(/\/\(/g,"(?:/").replace(/\+/g,"__plus__").replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?/g,function(a,c,d,e,f,g){return b.push({name:e,optional:!!g}),c=c||"",""+(g?"":c)+"(?:"+(g?c:"")+(d||"")+(f||d&&"([^/.]+?)"||"([^/]+?)")+")"+(g||"")}).replace(/([\/.])/g,"\\$1").replace(/__plus__/g,"(.+)").replace(/\*/g,"(.*)"),new RegExp("^"+a+"$",c?"":"i"))},g=function(a,b){var f=a.split(" "),g=2==f.length?f[0]:null;a=2==f.length?f[1]:f[0],d[a]||(d[a]=new e(a,g),c.push(d[a])),d[a].addHandler(b)},h=function(a,b,c){if(void 0===c&&(c=!1),"function"==typeof b)g(a,b),c!==!0&&h.reload();else if("object"==typeof a){for(var d in a)g(d,a[d]);c!==!0&&h.reload()}else"undefined"==typeof b&&h.navigate(a)};h.lookup=function(a,b){for(var d=0,e=c.length;e>d;d++){var f=c[d];if(f.name==a)return f.toURL(b)}},h.remove=function(a,b){var c=d[a];c&&c.removeHandler(b)},h.removeAll=function(){d={},c=[]},h.navigate=function(a,b){b=b||{};var c=b.silent||!1;c&&m(),setTimeout(function(){window.location.hash=a,c&&setTimeout(function(){l()},1)},1)};var i=function(){return window.location.hash.substring(1)},j=function(a,b){var c=[];return b.match(a,c)?(b.run(c),!0):!1},k=h.reload=function(){for(var a=i(),b=0,d=c.length;d>b;b++){var e=c[b];if(j(a,e))return}},l=function(){a.addEventListener?a.addEventListener("hashchange",k,!1):a.attachEvent("onhashchange",k)},m=function(){a.removeEventListener?a.removeEventListener("hashchange",k):a.detachEvent("onhashchange",k)};l(),b.Router=h;var w,y,n=b.Runtime.events={},o=b.Runtime.rendered={},p=b.Runtime.partials={},q=b.Runtime.templates={},r=b.Runtime.data={},s=function(a,b){return function(){return b}},t=function(a,b){return a(b)},u="app/",v=[];b.Extend=function(a,b){for(var c in b)a[c]&&"object"==typeof a[c]&&"[object Object]"==a[c].toString()&&b[c]?Extend(a[c],b[c]):a[c]=b[c];return a},b.Bind=function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)},b.Delegate=function(a,c,d,e){function f(a){var c=b.O2A(document.querySelectorAll(d)),f=c.indexOf(a.target);f>-1&&e.call(c[f],a)}a.addEventListener?a.addEventListener(c,f,!1):a.attachEvent("on"+c,f)},b.O2A=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&"length"!==c&&b.push(a[c]);return b},b.Fire=function(a,b,c){var d,c=c||{};document.createEvent?(d=document.createEvent("HTMLEvents"),d.initEvent(b,!0,!0)):(d=document.createEventObject(),d.eventType=b),d.data=c,document.createEvent?a.dispatchEvent(d):a.fireEvent("on"+d.eventType,d)},b.Get=function(a,b){function d(){if(4===c.readyState){if(200===c.status)return b.call(window,c.response);console.error("there was a problem in processing the request",c)}}var c;try{if(window.XMLHttpRequest?c=new XMLHttpRequest:window.ActiveXObject&&(c=new ActiveXObject("Microsoft.XMLHTTP")),!c)return alert("Giving up :( Cannot create an XMLHTTP instance"),!1;c.onreadystatechange=d,c.open("GET",a),c.send()}catch(e){console.error(e)}},b.GetScript=function(a,b){var b=b||function(){},c=document.createElement("script");c.onload=b,c.src=a,window.document.getElementsByTagName("head")[0].appendChild(c)},b.AsyncEach=function(b,c,d){function g(h){e++,e<b.length?(f.push(h),c(b[e],g)):d.call(a,f)}var e=-1,f=[];g()},b.GetTemplate=function(c,d,e){b.Get(c,function(c){var f=s(d,c);q[d]={name:d,template:f,render:function(){var c=this,e=function(a){y.innerHTML=t(c.template,a),b.Fire(document,"templateRendered",{template:c.name})};void 0!==p[d]&&(e=function(a){b.AsyncEach(p[d],function(a,b){r[a](b)},function(d){var d=d.filter(function(a){return void 0!==a&&null!==a}),e={};d.forEach(function(a){b.Extend(e,a)}),b.Extend(e,a),y.innerHTML=t(c.template,e),b.Fire(document,"templateRendered",{template:c.name})})});var f=b.O2A(arguments);f.unshift(e),r[c.name].apply(a,f)}},e()})},b.Events=function(a,b){void 0===n[a]&&(n[a]={}),n[a]=b},b.Partials=function(a,b){void 0===p[a]&&(p[a]={}),p[a]=b},b.Rendered=function(a,c){Array.isArray(c)||(c=[c]),void 0===o[a]&&(o[a]=[]),c.forEach(function(b){-1===o[a].indexOf(b)&&o[a].push(b)}),n[a]&&o[a].push(function(){for(var c in n[a])if(n[a].hasOwnProperty(c)){var d=c.split(" "),e=d.shift(),f=d.join(" ");b.O2A(y.childNodes).forEach(function(d){return d.tagName?b.Delegate(d,e,f,n[a][c]):void 0})}})},b.SetRendered=function(a){var b=[a];void 0===p[a]&&(b=b.concat(p[a])),b.forEach(function(a){o[a]&&o[a].forEach(function(a){a.call(window)})})},b.Data=function(a,b){r[a]=b},b.Load=function(a,c){var d=a,e=u+d+"/"+d;a.indexOf("/")>-1&&(e=u+a),-1===v.indexOf(a)?b.GetTemplate(e+".html",a,function(){b.GetScript(e+".js",function(){c&&(v.push(a),c.call(q[a]))})}):c.call(q[a])},b.SetDirty=function(a,b){q[a].render.apply(q[a],b)},b.Init=function(c,d){function e(){delete b.Define,b.Router("*",function(){b.Router(w)}),"function"==typeof d&&d.call(a)}function f(){s=c.compiler||s,t=c.renderer||t,u=c.appUrl||u,w=c.defaultRoute||w,y=c.outlet||y;var d=c.resources||[];b.AsyncEach(d,function(c,d){b.Define=function(d){var d=d||{};d.events&&b.Events(c,d.events),d.partials&&b.Partials(c,d.partials),void 0===d.rendered&&(d.rendered=[]),d.data?b.Data(c,d.data):b.Data(c,function(a){a()}),b.Rendered(c,d.rendered),d.handle?b.Router(d.handle,function(){var d=b.O2A(arguments);b.SetDirty.call(a,c,d)},!0):b.Router.reload()},b.Load(c,d)},function(){c.postInit?c.postInit(e,c):e()})}void 0===d&&(d=c,c={}),c.preInit?c.preInit(f,c):f()},b.Bind(document,"templateRendered",function(a){var c=a.data.template;b.SetRendered(c)}),"undefined"!=typeof define&&define.amd?define([],function(){return b}):"undefined"!=typeof module&&module.exports?module.exports=b:a.mjs=b,b.O2A(document.getElementsByTagName("script")).forEach(function(a){"undefined"!=typeof a.dataset.mjsapp&&b.GetScript(a.dataset.mjsapp)})}(this);